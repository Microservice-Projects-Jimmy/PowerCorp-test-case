import{d as K,u as L,r as d,o as M,a as B,c as s,b as O,e as h,f as e,w as R,F as p,g as w,t as i,n as G,h as H,i as A,j as T,k as _,l,s as U}from"./index-BTKqXKYf.js";const W={class:"flex justify-center bg-white py-10 dark:bg-dark"},Z={class:"container"},q={class:"flex gap-2"},J=["id","value","onInput"],Q=e("button",{type:"submit",class:"mt-4 w-full max-w-xs rounded-lg bg-blue-500 p-2 text-white font-semibold hover:bg-blue-600"}," Confirm Code ",-1),X={key:0,class:"flex justify-center mt-6"},Y={id:"toast-simple",class:"flex relative items-center w-full max-w-xs p-4 rtl:space-x-reverse text-gray-500 bg-white divide-x rtl:divide-x-reverse divide-gray-200 rounded-lg shadow dark:text-gray-400 dark:divide-gray-700 dark:bg-gray-800",role:"alert"},ee=e("svg",{class:"w-5 h-5 text-blue-600 dark:text-blue-500 rotate-45","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 20"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m9 17 8 2L9 1 1 19l8-2Zm0 0V9"})],-1),te={class:"ps-4 text-lg font-normal"},re={class:"ml-10"},ae={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},oe={class:"w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400"},se=e("caption",{class:"p-5 text-lg font-semibold text-left rtl:text-right text-gray-900 bg-white dark:text-white dark:bg-gray-800"}," History ",-1),le=e("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"},[e("tr",null,[e("th",{scope:"col",class:"p-4"},[e("div",{class:"flex items-center"},[e("input",{id:"checkbox-all-search",type:"checkbox",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),e("label",{for:"checkbox-all-search",class:"sr-only"},"checkbox")])]),e("th",{scope:"col",class:"px-6 py-3"},"Name"),e("th",{scope:"col",class:"px-6 py-3"},"Code"),e("th",{scope:"col",class:"px-6 py-3"},"Action")])],-1),ne=e("td",{class:"w-4 p-4"},[e("div",{class:"flex items-center"},[e("input",{id:"checkbox-table-search-1",type:"checkbox",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),e("label",{for:"checkbox-table-search-1",class:"sr-only"},"checkbox")])],-1),ce={scope:"row",class:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"},de={class:"px-6 py-4"},ie={class:"px-6 py-4"},ge={href:"#",class:"font-medium text-gray-900 whitespace-nowrap dark:text-white"},ue={ref:"excludedArea",class:"flex items-center flex-column flex-wrap md:flex-row justify-between pt-4","aria-label":"Table navigation"},he={class:"text-sm font-normal text-gray-900 mb-4 md:mb-0 p-3 block w-full md:inline md:w-auto"},xe={class:"font-semibold text-gray-900"},ye={class:"font-semibold text-gray-900"},be={class:"inline-flex -space-x-px rtl:space-x-reverse text-sm h-8"},fe={class:"cursor-pointer"},ve=["onClick"],me=["onClick"],ke=e("li",null,[e("a",{class:"flex items-center justify-center px-3 h-8 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white"},"...")],-1),pe={class:"cursor-pointer"},we=6e4,Ie=K({__name:"CodeView",setup(_e){const N=L(),f=d(),u=d(),C=d(),v="http://localhost:8080",x=d(100);let I;const n=d(Array(4).fill("")),m=d(0),S=d(""),$=d(0);let c=0,y=10;const j=()=>{f.value=Number(n.value.join("")),console.log(f.value),_.post(v+"/code/confirm",{username:localStorage.getItem("username"),code:f.value},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(t=>{console.log(t),B.push("/clicks")}).catch(t=>{N.add({severity:"error",summary:"Info",detail:t.response.data.message,life:3e3}),u.value=null,n.value=Array(4).fill(""),g()})},V=()=>{const r=100/(we/100);I=window.setInterval(()=>{x.value-=r,x.value<=0&&(clearInterval(I),u.value=null)},100)},g=(t=0,r=10)=>{t=Math.max(0,t),c=t,_.get(`${v}/code/get-all/${localStorage.getItem("username")}?page=${t}&size=${r}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(a=>{C.value=a.data.content,$.value=a.data.totalElements,m.value=a.data.totalPages,S.value=t*r+"-"+(t+1)*r})};M(()=>{localStorage.getItem("token")==null&&B.push("/"),g()});const z=()=>{_.get(v+"/code/get-code/"+localStorage.getItem("username"),{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(t=>{u.value=t.data.code,console.log(u.value)}),x.value=100,b(0),V(),g()},D=t=>{if(!/^[0-9]{1}$/.test(t.key)&&t.key!=="Backspace"&&t.key!=="Delete"&&t.key!=="Tab"&&!t.metaKey&&t.preventDefault(),t.key==="Enter"&&j(),t.key==="Delete"||t.key==="Backspace"){const r=n.value.indexOf("");r>0&&(n.value.splice(r-1,1,""),b(r-1))}},E=(t,r)=>{const o=r.target.value;n.value.splice(t,1,o),o&&t<n.value.length-1&&b(t+1)},F=t=>{t.target.select()},b=t=>{const r=document.getElementById(`input-${t}`);r==null||r.focus()},P=()=>{n.value=Array(4).fill(""),b(0)};return(t,r)=>(l(),s("div",null,[O(h(U)),e("section",W,[e("div",Z,[e("form",{id:"otp-form",class:"flex flex-col items-center gap-4",onSubmit:R(j,["prevent"])},[e("div",q,[(l(!0),s(p,null,w(n.value,(a,o)=>(l(),s("input",{id:"input-"+o,key:o,type:"text",maxlength:"1",class:"shadow-xs flex w-[64px] items-center justify-center rounded-lg border border-stroke bg-white p-2 text-center text-2xl font-medium text-gray-5 outline-none sm:text-4xl dark:border-dark-3 dark:bg-white/5",value:a,onInput:k=>E(o,k),onKeydown:r[0]||(r[0]=k=>D(k)),onFocus:F},null,40,J))),128))]),Q],32),e("div",{class:"flex flex-col items-center"},[e("button",{onClick:P,class:"mt-4 w-full max-w-xs rounded-lg bg-red-700 p-2 text-white font-semibold hover:bg-red-800"}," Reset "),e("button",{onClick:z,class:"mt-4 w-full max-w-xs rounded-lg bg-green-800 p-2 text-white font-semibold hover:bg-green-700"}," Get Code ")]),u.value?(l(),s("div",X,[e("div",Y,[ee,e("div",te,"Type code "+i(u.value),1),e("div",{class:"absolute bottom-0 left-0 h-1 bg-white",style:G({width:x.value+"%"})},null,4)])])):H("",!0)])]),e("section",re,[e("div",ae,[e("table",oe,[se,le,e("tbody",null,[(l(!0),s(p,null,w(C.value,(a,o)=>(l(),s("tr",{key:o,class:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"},[ne,e("th",ce,i(a.username),1),e("td",de,i(a.code),1),e("td",ie,[e("a",ge,i(a.createdAt),1)])]))),128))])]),e("nav",ue,[e("span",he,[A("Showing "),e("span",xe,i(S.value),1),A(" of "),e("span",ye,i($.value),1)]),e("ul",be,[e("li",fe,[e("a",{onClick:r[1]||(r[1]=a=>g(T(c)?--c.value:--c,h(y))),class:"flex items-center justify-center px-3 h-8 ms-0 leading-tight text-gray-500 bg-white border border-gray-300 rounded-s-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white"},"Previous")]),(l(!0),s(p,null,w(m.value>5?5:m.value,a=>(l(),s("li",{class:"cursor-pointer",key:a},[a-1!=h(c)?(l(),s("a",{key:0,onClick:o=>g(a-1,h(y)),class:"flex items-center justify-center px-3 h-8 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white"},i(a),9,ve)):(l(),s("a",{key:1,onClick:o=>g(a-1,h(y)),"aria-current":"page",class:"flex items-center justify-center px-3 h-8 text-blue-600 border border-gray-300 bg-blue-50 hover:bg-blue-100 hover:text-blue-700 dark:border-gray-700 dark:bg-gray-700 dark:text-white"},i(a),9,me))]))),128)),ke,e("li",pe,[e("a",{onClick:r[2]||(r[2]=a=>g(T(c)?++c.value:++c,h(y))),class:"flex items-center justify-center px-3 h-8 leading-tight text-gray-500 bg-white border border-gray-300 rounded-e-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white"},"Next")])])],512)])])]))}});export{Ie as default};
